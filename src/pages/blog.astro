---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from '../components/BlogPost.astro';
import Pagination from '../components/Pagination.astro';
import { getPaginatedPosts } from '../utils/posts';

const pageTitle = "Blog";
const { posts: currentPosts, totalPages, currentPage } = await getPaginatedPosts(1);
---

<BaseLayout pageTitle={pageTitle}>
  {currentPosts.map((post) => (
    <BlogPost
      url={post.url}
      title={post.frontmatter.title}
      description={post.frontmatter.description}
      pubDate={post.frontmatter.pubDate}
      readingTime={post.frontmatter.readingTime}
    />
  ))}
  <Pagination currentPage={currentPage} totalPages={totalPages} />
</BaseLayout>
